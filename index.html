<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Edit Pengumuman</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <style>
    /* CSS Reset & base */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #f9fafb;
      color: #1f2937;
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 16px;
    }
    main {
      background: white;
      border-radius: 12px;
      max-width: 480px;
      width: 100%;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      padding: 24px 32px;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    h1 {
      font-weight: 700;
      font-size: 1.5rem;
      margin: 0;
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 12px;
    }

    /* Form label */
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 1rem;
    }

    /* Audio container */
    .audio-input-container {
      display: flex;
      align-items: center;
      gap: 12px;
      border: 1.5px solid #d1d5db;
      border-radius: 12px;
      padding: 12px 16px;
      background: #fafafa;
    }
    .material-icons {
      color: #4b5563;
      font-size: 28px;
      user-select: none;
    }
    audio {
      flex-grow: 1;
      outline: none;
    }

    /* Delete button */
    .btn-delete-sound {
      background: #ef4444;
      border: none;
      color: white;
      padding: 10px 14px;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background-color 0.3s ease;
      max-width: 140px;
      align-self: start;
    }
    .btn-delete-sound:hover,
    .btn-delete-sound:focus {
      background: #b91c1c;
      outline: none;
    }

    /* Form group for Duration and Date */
    .form-row {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
      align-items: center;
    }

    .form-field {
      flex: 1;
      min-width: 140px;
    }
    .checkbox-field {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-weight: 600;
      user-select: none;
    }
    input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }

    input[type="number"],
    input[type="date"] {
      width: 100%;
      padding: 10px 14px;
      border-radius: 10px;
      border: 1.5px solid #d1d5db;
      font-size: 1rem;
      font-weight: 400;
      transition: border-color 0.3s ease;
    }
    input[type="number"]:focus,
    input[type="date"]:focus {
      border-color: #2563eb;
      outline: none;
      background: #f0f9ff;
    }

    /* Buttons container */
    .buttons-row {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
    }

    button {
      flex: 1 1 45%;
      padding: 12px 0;
      font-weight: 700;
      font-size: 1rem;
      border-radius: 10px;
      cursor: pointer;
      border: none;
      transition: background-color 0.3s ease, color 0.3s ease;
      user-select: none;
      min-width: 120px;
    }

    .btn-cancel {
      background: #d1d5db;
      color: #374151;
    }
    .btn-cancel:hover,
    .btn-cancel:focus {
      background: #9ca3af;
      outline: none;
    }
    .btn-update {
      background: #2563eb;
      color: white;
    }
    .btn-update:hover,
    .btn-update:focus {
      background: #1e40af;
      outline: none;
    }

    /* Responsive adjustments */
    @media (max-width: 480px) {
      main {
        padding: 20px 20px;
      }
      .form-row {
        flex-direction: column;
        gap: 16px;
      }
      .buttons-row {
        flex-direction: column;
      }
      button {
        flex: 1 1 100%;
        min-width: auto;
      }
      .btn-delete-sound {
        max-width: none;
        width: 100%;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <main role="main" aria-labelledby="pageTitle">
    <h1 id="pageTitle">Edit Pengumuman</h1>

    <form id="editForm" aria-describedby="formDesc">
      <p id="formDesc" style="margin-bottom:16px; font-weight:600;">Isi Pengumuman (Suara)</p>
      
      <div class="audio-input-container">
        <span class="material-icons" aria-hidden="true" title="Audio mikrofon">mic</span>
        <audio id="audioPlayer" controls aria-label="Player audio pengumuman suara">
          <source src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/147fff89-0bea-458a-bafb-c43432010514.png" type="audio/mpeg" />
          Browser anda tidak mendukung audio.
        </audio>
      </div>

      <button type="button" class="btn-delete-sound" id="deleteSoundBtn" aria-label="Hapus suara pengumuman">Hapus suara</button>

      <div class="form-row">
        <div class="form-field">
          <label for="durationDays" class="checkbox-field">
            <input type="checkbox" id="durationCheckbox" />
            Durasi: <input type="number" id="durationDays" name="durationDays" min="1" max="365" placeholder="Hari" disabled aria-disabled="true" aria-label="Durasi dalam hari" />
          </label>
        </div>

        <div class="form-field">
          <label for="dateInput">Tanggal:</label>
          <input type="date" id="dateInput" name="dateInput" aria-required="true" required />
        </div>
      </div>

      <div class="buttons-row">
        <button type="button" class="btn-cancel" id="cancelBtn">Batal</button>
        <button type="submit" class="btn-update">Update</button>
      </div>
    </form>
  </main>

  <script>
    const durationCheckbox = document.getElementById('durationCheckbox');
    const durationDays = document.getElementById('durationDays');
    const deleteSoundBtn = document.getElementById('deleteSoundBtn');
    const audioPlayer = document.getElementById('audioPlayer');
    const cancelBtn = document.getElementById('cancelBtn');
    const editForm = document.getElementById('editForm');

    // Enable or disable duration input based on checkbox
    durationCheckbox.addEventListener('change', () => {
      if(durationCheckbox.checked) {
        durationDays.disabled = false;
        durationDays.setAttribute('aria-disabled', 'false');
        durationDays.focus();
      } else {
        durationDays.disabled = true;
        durationDays.setAttribute('aria-disabled', 'true');
        durationDays.value = '';
      }
    });

    // Clear audio source when user clicks Hapus suara
    deleteSoundBtn.addEventListener('click', () => {
      audioPlayer.pause();
      audioPlayer.currentTime = 0;
      audioPlayer.src = "";
      audioPlayer.load();
      deleteSoundBtn.disabled = true;
      deleteSoundBtn.style.opacity = 0.6;
      deleteSoundBtn.textContent = "Suara dihapus";
      deleteSoundBtn.setAttribute('aria-disabled', 'true');
    });

    // Cancel button reload page (or could close modal in real app)
    cancelBtn.addEventListener('click', () => {
      // For demo, resetting form
      editForm.reset();
      durationDays.disabled = true;
      durationDays.setAttribute('aria-disabled', 'true');
      audioPlayer.src = "https://placehold.co/audio/1sec.mp3";
      audioPlayer.load();

      // Reset delete button
      deleteSoundBtn.disabled = false;
      deleteSoundBtn.style.opacity = 1;
      deleteSoundBtn.textContent = "Hapus suara";
      deleteSoundBtn.setAttribute('aria-disabled', 'false');
    });

    // Handle form submit
    editForm.addEventListener('submit', (e) => {
      e.preventDefault();
      // Form data can be processed here
      const durationEnabled = durationCheckbox.checked;
      const durationValue = durationEnabled ? durationDays.value : null;
      const dateValue = document.getElementById('dateInput').value;
      
      if (dateValue === '') {
        alert('Tanggal wajib diisi.');
        return;
      }
      // Simulate update
      alert(
        'Pengumuman diperbarui:\n' +
        (durationEnabled ? ('Durasi: ' + durationValue + ' hari\n') : '') +
        'Tanggal: ' + dateValue
      );
    });
  </script>
</body>
</html>



